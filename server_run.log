echo "MEDIA_DIR=/media/ours_cache128_4s" > .env
echo "SERVER_CONFIG_PATH=/configs/media_server/ours_cache128_4s.yaml" >> .env
echo "UID=$$(id -u)" >> .env
echo "GID=$$(id -g)" >> .env
docker compose --env-file .env -f docker-compose.yaml --profile build-only up --build -d
time="2025-11-10T23:20:58Z" level=warning msg="/home/jupyter-michaelrudolph/Projects/spirit_collection/spirit-transcoding-service/docker-compose.yaml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 1.28kB done
#1 DONE 0.0s

#2 [media-server internal] load build definition from MediaServer.Dockerfile
#2 transferring dockerfile: 159B done
#2 DONE 0.0s

#3 [transcoding-service internal] load build definition from Backend.Dockerfile
#3 transferring dockerfile: 559B done
#3 DONE 0.0s

#4 [transcoding-service internal] load metadata for docker.io/library/pyrabbit-transcoder-hw:latest
#4 DONE 0.0s

#5 [transcoding-service internal] load .dockerignore
#5 transferring context: 83B done
#5 DONE 0.0s

#6 [transcoding-service 1/5] FROM docker.io/library/pyrabbit-transcoder-hw:latest
#6 DONE 0.0s

#7 [transcoding-service internal] load build context
#7 transferring context: 33.40kB done
#7 DONE 0.0s

#8 [transcoding-service 2/5] RUN pip install --no-cache-dir fastapi uvicorn
#8 CACHED

#9 [transcoding-service 3/5] RUN mkdir -p /media /app/src
#9 CACHED

#10 [transcoding-service 4/5] COPY ./src/ /app/src/
#10 CACHED

#11 [transcoding-service 5/5] WORKDIR /app/src
#11 CACHED

#12 [transcoding-service] exporting to image
#12 exporting layers done
#12 writing image sha256:aea99dbc9554785916cfaad1cace2f3b7e193c11665ceee0025ca34423bb198c done
#12 naming to docker.io/library/transcoding-service done
#12 DONE 0.0s

#13 [transcoding-service] resolving provenance for metadata file
#13 DONE 0.0s

#14 [media-server internal] load metadata for docker.io/library/nginx:stable-alpine
#14 DONE 0.9s

#5 [media-server internal] load .dockerignore
#5 CACHED

#15 [media-server 1/2] FROM docker.io/library/nginx:stable-alpine@sha256:30f1c0d78e0ad60901648be663a710bdadf19e4c10ac6782c235200619158284
#15 DONE 0.0s

#16 [media-server internal] load build context
#16 transferring context: 68B done
#16 DONE 0.0s

#17 [media-server 2/2] COPY src/nginx.conf.template /etc/nginx/templates/default.conf.template
#17 CACHED

#18 [media-server] exporting to image
#18 exporting layers done
#18 writing image sha256:9e9bf52269975fdec713a4ba3e8e3f24b03189db209d165cecb2f19927b1fb72 0.0s done
#18 naming to docker.io/library/media-server done
#18 DONE 0.0s

#19 [media-server] resolving provenance for metadata file
#19 DONE 0.0s
 transcoding-service  Built
 media-server  Built
 Container transcoding-service  Starting
 Container transcoding-service  Started
 Container media-server  Starting
 Container media-server  Started
